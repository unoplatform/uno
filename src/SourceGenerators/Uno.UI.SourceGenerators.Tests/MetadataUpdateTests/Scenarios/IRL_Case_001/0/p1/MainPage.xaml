<Page x:Class="Test01.MainPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="using:CSHRTest01"
	xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d">

	<Grid Margin="16,16,16,16">
		<Grid Grid.Row="0">
			<Image HorizontalAlignment="Left" VerticalAlignment="Center" Height="40" Width="40" Source="ms-appx:///Assets/Icons/iconLogo.targetsize-32.png" Grid.Column="0" x:Uid="MainPage.Image.Logo" />
			<TextBlock Text="Activités GitHub" Style="{StaticResource TitleTextBlockStyle}" VerticalAlignment="Center" Grid.Column="1" x:Uid="MainPage.Label.Title" />
			<StackPanel HorizontalAlignment="Right" VerticalAlignment="Center" Orientation="Horizontal" Grid.Column="2">
				<Button Margin="0,0,8,0" Style="{StaticResource DefaultButtonStyle}" Command="{Binding SyncCommand}" Content="Sync" x:Uid="MainPage.Button.Sync" />
				<Button Style="{StaticResource AccentButtonStyle}" Command="{Binding PushToBambooCommand}" Content="Push sélection" x:Uid="MainPage.Button.Push" />
			</StackPanel>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="56" />
				<ColumnDefinition Width="*" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>
		</Grid>
		<Grid Margin="0,12,0,0" Grid.Row="1">
			<ListView ItemContainerStyle="{StaticResource DefaultListViewItemStyle}" SelectedItem="{Binding SelectedActivity}" ItemsSource="{Binding Activities}" Grid.Column="0" x:Uid="MainPage.List.Activities" x:Name="ActivitiesList">
				<ListView.ItemTemplate>
					<DataTemplate>
						<Border BorderThickness="1,1,1,1" Margin="0,6,0,6" Padding="12,12,12,12" CornerRadius="8,8,8,8">
							<Grid>
								<Border VerticalAlignment="Top" CornerRadius="20,20,20,20" Height="40" Width="40">
									<Image HorizontalAlignment="Center" VerticalAlignment="Center" Stretch="Uniform" Source="{Binding SourceIconPath}" />
								</Border>
								<StackPanel Margin="12,0,12,0" Grid.Column="1">
									<StackPanel Orientation="Horizontal">
										<TextBlock Style="{StaticResource BodyStrongTextBlockStyle}">
        <Run Text="{Binding RepoName}" />
            <Run Text=" · " />
            <Run Text="{Binding Type}" />
										</TextBlock>
									</StackPanel>
									<TextBlock Margin="0,6,0,0" TextWrapping="Wrap" Text="{Binding Title}" Style="{StaticResource BodyTextBlockStyle}" />
									<TextBlock Margin="0,6,0,0" TextWrapping="Wrap" Text="{Binding Description}" Style="{StaticResource CaptionTextBlockStyle}" />
								</StackPanel>
								<StackPanel VerticalAlignment="Top" HorizontalAlignment="Right" Grid.Column="2">
									<TextBlock HorizontalAlignment="Right" Text="{Binding Timestamp}" Style="{StaticResource CaptionTextBlockStyle}" />
									<StackPanel HorizontalAlignment="Right" Margin="0,8,0,0" Orientation="Horizontal">
										<NumberBox SmallChange="5" Minimum="0" Value="{Binding DurationMinutes}" Width="72" x:Uid="MainPage.NumberBox.Duration" />
										<Button Margin="8,0,0,0" Style="{StaticResource DefaultButtonStyle}" CommandParameter="{Binding}" Command="{Binding EditDurationCommand, ElementName=ActivitiesList}" Content="Edit" />
									</StackPanel>
									<StackPanel HorizontalAlignment="Right" Margin="0,8,0,0" Orientation="Horizontal">
										<CheckBox Content="Exporter" IsChecked="{Binding MarkForExport}" x:Uid="MainPage.Check.Export" />
									</StackPanel>
								</StackPanel>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="48" />
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
							</Grid>
							<Border.Shadow>
								<ThemeShadow />
							</Border.Shadow>
						</Border>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
			<Border Visibility="Collapsed" Margin="12,0,0,0" Padding="12,12,12,12" Grid.Column="1" x:Name="DetailPanel">
				<StackPanel>
					<TextBlock Text="{Binding SelectedActivity.Title}" Style="{StaticResource TitleTextBlockStyle}" x:Uid="MainPage.Detail.Title" />
					<TextBlock Margin="0,8,0,0" TextWrapping="Wrap" Text="{Binding SelectedActivity.Description}" Style="{StaticResource BodyTextBlockStyle}" />
					<TextBlock Margin="0,12,0,0" Text="Durée" Style="{StaticResource CaptionTextBlockStyle}" />
					<NumberBox SmallChange="5" Minimum="0" Value="{Binding SelectedActivity.DurationMinutes}" x:Uid="MainPage.Detail.Duration" />
					<StackPanel Margin="0,16,0,0" Orientation="Horizontal">
						<Button Style="{StaticResource AccentButtonStyle}" CommandParameter="{Binding SelectedActivity}" Command="{Binding ApproveCommand}" Content="Approuver" x:Uid="MainPage.Detail.Button.Approve" />
						<Button Margin="8,0,0,0" Style="{StaticResource DefaultButtonStyle}" CommandParameter="{Binding SelectedActivity}" Command="{Binding SkipCommand}" Content="Ignorer" x:Uid="MainPage.Detail.Button.Skip" />
					</StackPanel>
				</StackPanel>
			</Border>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="2*" />
				<ColumnDefinition x:Name="PreviewColumn" Width="0" MinWidth="280" MaxWidth="420" />
			</Grid.ColumnDefinitions>
		</Grid>
		<StackPanel Margin="0,12,0,0" HorizontalAlignment="Center" Orientation="Horizontal" Grid.Row="1">
			<Button Style="{StaticResource DefaultButtonStyle}" Command="{Binding LoadMoreCommand}" Content="Charger plus" x:Uid="MainPage.Button.LoadMore" />
		</StackPanel>
		<Grid.RowDefinitions>
			<RowDefinition Height="56" />
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
	</Grid>
</Page>
