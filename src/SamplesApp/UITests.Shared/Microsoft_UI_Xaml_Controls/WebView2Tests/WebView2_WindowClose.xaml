<Page
    x:Class="UITests.Microsoft_UI_Xaml_Controls.WebView2Tests.WebView2_WindowClose"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UITests.Microsoft_UI_Xaml_Controls.WebView2Tests"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>
		
		<StackPanel Grid.Row="0" 
					Padding="16" 
					Spacing="8"
					Background="{ThemeResource SystemControlBackgroundChromeMediumBrush}">
			<TextBlock Text="WebView2 Window Close Test" 
					   FontSize="20" 
					   FontWeight="Bold"
					   Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
			<TextBlock TextWrapping="Wrap"
					   Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}">
				<Run Text="Click inside the WebView below to focus it, then test:"/>
				<LineBreak/>
				<Run Text="• Windows: Press Alt+F4 - should close the entire window"/>
				<LineBreak/>
				<Run Text="• macOS: Press Cmd+W - should close the entire window"/>
				<LineBreak/>
				<Run Text="• macOS: Press Cmd+Q - should quit the entire application"/>
			</TextBlock>
			<CheckBox x:Name="PreventCloseCheckBox" 
					  Content="Prevent window from closing (test Closing event cancellation)"
					  IsChecked="{x:Bind ViewModel.PreventClose, Mode=TwoWay}"/>
			<TextBlock x:Name="StatusText"
					   Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
					   Foreground="{ThemeResource SystemAccentColorBrush}"
					   FontWeight="SemiBold"/>
		</StackPanel>
		
		<controls:WebView2 x:Name="TestWebView"
						   Grid.Row="1"
						   Source="https://platform.uno"/>
	</Grid>
</Page>
