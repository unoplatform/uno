{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["// Copyright (c) Microsoft. All rights reserved. Licensed under the MIT license. See LICENSE file in the project root for full license information.\n\ndocument.addEventListener(\n    \"DOMContentLoaded\",\n    function () {\n\n        initializeNavbar();\n        \n        // Move SDK version badge into first h1\n        const sdkBadge = document.querySelector('#sdk-version-info');\n        const firstH1 = document.querySelector('article h1:first-child');\n        if (sdkBadge && firstH1) {\n            firstH1.appendChild(sdkBadge);\n        }\n        \n        // Cache key and expiration (1 hour)\n        const CACHE_KEY = 'uno_sdk_versions';\n        const CACHE_DURATION = 60 * 60 * 1000; // 1 hour in milliseconds\n        \n        // Try to load cached versions immediately\n        const cached = localStorage.getItem(CACHE_KEY);\n        let cachedData = null;\n        if (cached) {\n            try {\n                cachedData = JSON.parse(cached);\n                if (Date.now() - cachedData.timestamp < CACHE_DURATION) {\n                    updateVersionDisplay(cachedData.stable, cachedData.dev);\n                } else {\n                    cachedData = null; // Cache expired\n                }\n            } catch (e) {\n                cachedData = null;\n            }\n        }\n        \n        // Fetch and update SDK version dynamically from NuGet\n        fetch('https://api.nuget.org/v3-flatcontainer/uno.templates/index.json')\n            .then(r => r.json())\n            .then(data => {\n                if (data.versions) {\n                    const versions = data.versions;\n                    \n                    // Find latest stable version (no -dev suffix)\n                    const stableVersions = versions.filter(v => !v.includes('-dev'));\n                    const latestStableVersion = stableVersions[stableVersions.length - 1];\n                    \n                    // Find latest dev version\n                    const devVersions = versions.filter(v => v.includes('-dev'));\n                    const latestDevVersion = devVersions[devVersions.length - 1];\n                    \n                    // Cache the versions\n                    localStorage.setItem(CACHE_KEY, JSON.stringify({\n                        stable: latestStableVersion,\n                        dev: latestDevVersion,\n                        timestamp: Date.now()\n                    }));\n                    \n                    // Update display\n                    updateVersionDisplay(latestStableVersion, latestDevVersion);\n                }\n            })\n            .catch(err => {\n                console.log('Could not fetch SDK version:', err);\n                // If fetch fails and we have cached data, keep using it\n            });\n        \n        function updateVersionDisplay(latestStableVersion, latestDevVersion) {\n            const versionElement = document.querySelector('.sdk-version');\n            const badgeElement = document.querySelector('.sdk-version-badge');\n            \n            if (!versionElement) return;\n            \n            versionElement.textContent = latestStableVersion;\n            \n            if (badgeElement) {\n                // Remove existing click handler if any\n                const newBadge = badgeElement.cloneNode(true);\n                badgeElement.parentNode.replaceChild(newBadge, badgeElement);\n                \n                newBadge.title = `Latest stable: ${latestStableVersion}\\nLatest dev: ${latestDevVersion}\\nClick to see update instructions`;\n                newBadge.style.cursor = 'pointer';\n                \n                // Add click handler to show update instructions\n                newBadge.addEventListener('click', function(e) {\n                    e.preventDefault();\n                    const existingModal = document.getElementById('sdk-update-modal');\n                    if (existingModal) {\n                        existingModal.remove();\n                        return;\n                    }\n                    \n                    const modal = document.createElement('div');\n                    modal.id = 'sdk-update-modal';\n                    modal.innerHTML = `\n                        <div class=\"sdk-modal-overlay\">\n                            <div class=\"sdk-modal-content\">\n                                <div class=\"sdk-modal-header\">\n                                    <h3>Update Uno SDK</h3>\n                                    <button class=\"sdk-modal-close\">&times;</button>\n                                </div>\n                                <div class=\"sdk-modal-body\">\n                                    <div class=\"sdk-version-section\">\n                                        <h4>üì¶ Latest Stable Version</h4>\n                                        <p class=\"version-label\"><strong>${latestStableVersion}</strong> - Recommended for production</p>\n                                        <div class=\"sdk-code-block\">\n                                            <code>dotnet new install Uno.Templates::${latestStableVersion}</code>\n                                            <button class=\"sdk-copy-btn\" data-clipboard=\"dotnet new install Uno.Templates::${latestStableVersion}\">Copy</button>\n                                        </div>\n                                    </div>\n                                    \n                                    <div class=\"sdk-version-section\">\n                                        <h4>üöÄ Latest Dev Version</h4>\n                                        <p class=\"version-label\"><strong>${latestDevVersion}</strong> - Preview features & fixes</p>\n                                        <div class=\"sdk-code-block\">\n                                            <code>dotnet new install Uno.Templates::${latestDevVersion}</code>\n                                            <button class=\"sdk-copy-btn\" data-clipboard=\"dotnet new install Uno.Templates::${latestDevVersion}\">Copy</button>\n                                        </div>\n                                        <p class=\"sdk-note\">\n                                            üìç <strong>NuGet Package:</strong> <a href=\"https://www.nuget.org/packages/Uno.Templates\" target=\"_blank\" rel=\"noopener\">Uno.Templates on NuGet.org</a>\n                                        </p>\n                                    </div>\n                                    \n                                    <div class=\"sdk-version-section\">\n                                        <h4>‚ÑπÔ∏è Check Installed Version</h4>\n                                        <div class=\"sdk-code-block\">\n                                            <code>dotnet new details Uno.Templates</code>\n                                            <button class=\"sdk-copy-btn\" data-clipboard=\"dotnet new details Uno.Templates\">Copy</button>\n                                        </div>\n                                    </div>\n                                    \n                                    <p class=\"sdk-note\">\n                                        üí° <strong>Tip:</strong> If you have an older version installed, uninstall it first using:<br>\n                                        <code>dotnet new uninstall Uno.Templates</code>\n                                    </p>\n                                </div>\n                            </div>\n                        </div>\n                    `;\n                    document.body.appendChild(modal);\n                    \n                    // Close modal handlers\n                    modal.querySelector('.sdk-modal-close').addEventListener('click', () => modal.remove());\n                    modal.querySelector('.sdk-modal-overlay').addEventListener('click', (e) => {\n                        if (e.target.classList.contains('sdk-modal-overlay')) {\n                            modal.remove();\n                        }\n                    });\n                    \n                    // Copy button handlers\n                    modal.querySelectorAll('.sdk-copy-btn').forEach(btn => {\n                        btn.addEventListener('click', function() {\n                            const text = this.getAttribute('data-clipboard');\n                            navigator.clipboard.writeText(text).then(() => {\n                                const originalText = this.textContent;\n                                this.textContent = 'Copied!';\n                                this.classList.add('copied');\n                                setTimeout(() => {\n                                    this.textContent = originalText;\n                                    this.classList.remove('copied');\n                                }, 2000);\n                            });\n                        });\n                    });\n                });\n            }\n        }\n\n        document.addEventListener(\n            \"click\",\n            function (e) {\n                const t = e.target;\n                if (\n                    window.innerWidth >= 1024 ||\n                    !t.matches(\"#navbar .menu-item-has-children a\")\n                )\n                    return;\n                e.stopImmediatePropagation();\n                t.parentElement.classList.toggle(\"open\");\n            },\n            true\n        );\n    },\n    false\n);\n\n"],"names":["document","addEventListener","initializeNavbar","sdkBadge","querySelector","firstH1","appendChild","CACHE_KEY","cached","localStorage","getItem","let","cachedData","JSON","parse","Date","now","timestamp","updateVersionDisplay","stable","dev","e","latestStableVersion","latestDevVersion","versionElement","badgeElement","textContent","newBadge","cloneNode","parentNode","replaceChild","title","style","cursor","preventDefault","existingModal","getElementById","remove","modal","createElement","id","innerHTML","body","target","classList","contains","querySelectorAll","forEach","btn","text","this","getAttribute","navigator","clipboard","writeText","then","originalText","add","setTimeout","fetch","r","json","data","versions","stableVersions","filter","v","includes","length","devVersions","setItem","stringify","catch","err","console","log","t","window","innerWidth","matches","stopImmediatePropagation","parentElement","toggle"],"mappings":"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"}