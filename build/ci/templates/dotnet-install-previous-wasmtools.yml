parameters:
  UnoCheckParameters: ''

steps:
  - task: PowerShell@2
    displayName: Install Previous .NET Wasm Workloads
    inputs:
      pwsh: true
      targetType: inline
      script: |
        echo "DOTNET_ROOT: $env:DOTNET_ROOT"
        echo "DOTNET_INSTALL_DIR: $env:DOTNET_INSTALL_DIR"
        $ErrorActionPreference = 'Stop'
        $args = @('workload', 'install', 'wasm-tools-net9')
        if ($IsWindows) {
          & dotnet @args
        }
        else {
          sudo dotnet @args
        }
    retryCountOnTaskFailure: 3
    env:
      DOTNET_ROOT: $(DOTNET_ROOT)
      DOTNET_INSTALL_DIR: $(DOTNET_INSTALL_DIR)
