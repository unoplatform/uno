
stages:
- stage: Setup
  displayName: Setup
  jobs:
  - job: Validations
    cancelTimeoutInMinutes: 1
  
    pool:
      vmImage: $(linuxVMImage)

    variables:
      npm_config_cache: $(Pipeline.Workspace)/.npm

    steps:
    - checkout: self
      clean: true

    - template: templates/gitversion-run.yml
    - template: setup/.azure-devops-setup-commitsar.yml
    - template: setup/.azure-devops-setup-doc-validations.yml

- stage: docs_generation
  displayName: Docs Generation
  dependsOn: Setup
  jobs:
  - template: docs/.azure-devops-docs.yml
    parameters:
      poolName: '$(windowsScaledPool)'
